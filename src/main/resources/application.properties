spring.application.name=apigw

# Upstream target service base URL (UAT default from Postman collection)
upstream.base-url=https://test-api.fcbv.vn

# Route configuration (Spring Cloud Gateway) using properties
# Forward listed paths to the configured upstream base URL
spring.cloud.gateway.server.webflux.routes[0].id=fcbv-api
spring.cloud.gateway.server.webflux.routes[0].uri=${upstream.base-url}
spring.cloud.gateway.server.webflux.routes[0].predicates[0]=Path=/login,/otp,/change_pass,/rireq,/cireq,/prreq,/cureq,/ecreq
# Optional: preserve original Host header
# spring.cloud.gateway.server.webflux.routes[0].filters[0]=PreserveHostHeader

# Gateway HTTP client timeouts (to upstream)
# Connect timeout is in milliseconds; response-timeout is a Duration
spring.cloud.gateway.server.webflux.httpclient.connect-timeout=60000
spring.cloud.gateway.server.webflux.httpclient.response-timeout=60s
spring.http.reactiveclient.read-timeout=10s
spring.http.client.read-timeout=10s

# Gateway logging properties
gateway.logging.enabled=true
gateway.logging.log-headers=true
gateway.logging.log-request-body=true
gateway.logging.log-response-body=true
gateway.logging.max-body-size=1048576
# headers to mask (case-insensitive)
gateway.logging.masked-headers[0]=authorization
gateway.logging.masked-headers[1]=cookie
gateway.logging.masked-headers[2]=set-cookie
# json fields/form fields to mask
gateway.logging.masked-json-fields[0]=pass
gateway.logging.masked-json-fields[1]=old_pass
gateway.logging.masked-json-fields[2]=new_pass
gateway.logging.masked-json-fields[3]=otp
gateway.logging.masked-json-fields[4]=password
gateway.logging.masked-json-fields[5]=token

# form fields to mask
gateway.logging.masked-form-fields[0]=pass
gateway.logging.masked-form-fields[1]=password

# content types to include when logging bodies
gateway.logging.content-type-includes[0]=application/json
gateway.logging.content-type-includes[1]=text/plain
gateway.logging.content-type-includes[2]=application/x-www-form-urlencoded
gateway.logging.content-type-includes[3]=multipart/form-data

# Actuator exposure for quick checks
management.endpoints.web.exposure.include=health,info,loggers

test.auth.user=fcbvB505
test.auth.pass=Fcbv@2025


## loging
logging.file.path=./logs/
logging.file.name=${logging.file.path}/app.log
logging.level.com.rezo.apigw.gateway.LoggingGlobalFilter=INFO
logging.level.root=INFO
